{% extends "base.html.jinja" %}
{% block title %}
    Service Detail
{% endblock title %}
{% block head %}
    {{ super() }}
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const statusElem = document.getElementById("service-status");
            const source = new EventSource("/service/stream/{{ service.id }}");
            source.onmessage = function(event) {
                // Assuming the event data is a JSON string with service_id and status
                // const data = JSON.parse(event.data);
                statusElem.textContent = event.data;
            };
        });
    </script>
{% endblock head %}
{% block body %}
    <h1>Service Detail</h1>
    <ul>
        <li>
            <strong>Name:</strong> {{ service.name }}
        </li>
        <li>
            <strong>URI:</strong> {{ service.uri }}
        </li>
        <li>
            <strong>Status:</strong> <span id="service-status">Loading...</span>
        </li>
    </ul>
{% endblock body %}
